mappipe(){
  func="$1"; shift
  cat - | while read -r line; do $func "$@" "$line"; done
}
